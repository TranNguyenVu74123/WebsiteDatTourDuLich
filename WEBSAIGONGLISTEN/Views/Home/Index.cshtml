@model IEnumerable<WEBSAIGONGLISTEN.Models.Product>
@{
    ViewData["Title"] = "Trang chủ";
    int numOfQuantity = 1;
}

<!-- Thêm thư viện Font Awesome -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet" />

<style>
    .card {
        height: 100%;
        transition: transform 0.3s ease;
    }

        .card:hover {
            transform: translateY(-5px);
        }

    .card-img-top {
        object-fit: cover;
        height: 250px;
    }

    .banner-content {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        color: #ffffff;
        text-align: center;
        background: rgba(0, 0, 0, 0.5);
        padding: 20px;
        border-radius: 8px;
    }

    #bannerCarousel .carousel-item img {
        height: 60vh;
        object-fit: cover;
        filter: brightness(0.8);
    }

    /* Style cho form tìm kiếm */
    .form-control, .form-select {
        border-radius: 0.375rem;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    }

    .btn-primary {
        background-color: #007bff;
        border-color: #007bff;
        transition: background-color 0.3s ease;
    }

        .btn-primary:hover {
            background-color: #0056b3;
            border-color: #0056b3;
        }

    .out-of-stock .card-body {
        background-color: #f8d7da;
    }
</style>

<section id="bannerCarousel" class="carousel slide" data-bs-ride="carousel">
    <div class="carousel-inner">
        <div class="carousel-item active">
            <img src="https://encrypted-tbn2.gstatic.com/licensed-image?q=tbn:ANd9GcRFfU9vqxBbsq_f82Avfr4erQXikK_PeM1S36Lo1ipBo61SrgbU5tPPANMuCMch9WeQtd5IqNTMFgWxIi6dYVI_S7idcPjuyOHFrYCKBg" class="d-block w-100" alt="Image 1">
            <div class="banner-content">
                <h2>Chào mừng đến với trang chủ!</h2>
                <p>Khám phá những sản phẩm tốt nhất cho bạn.</p>
            </div>
        </div>
        <div class="carousel-item">
            <img src="https://lh5.googleusercontent.com/p/AF1QipNCXi_5nEQwa834sKjoX_j_NxCuT3si6dZQpJ6_=w675-h390-n-k-no" class="d-block w-100" alt="Image 2">
            <div class="banner-content">
                <h2>Sản phẩm mới nhất!</h2>
                <p>Cập nhật những sản phẩm hot nhất của chúng tôi.</p>
            </div>
        </div>
        <div class="carousel-item">
            <img src="https://encrypted-tbn3.gstatic.com/licensed-image?q=tbn:ANd9GcTbYgqVSOflvu3JIeTsV27X1KP9sualiqDuhiyMmEcgehsFe_Gj36gtZXce5_v9FbyjJ4QKgAaxQLBbiMLQjDjrKuORvjR-DmpsQ3qsnQ" class="d-block w-100" alt="Image 2">
            <div class="banner-content">
                <h2>Sản phẩm mới nhất!</h2>
                <p>Cập nhật những sản phẩm hot nhất của chúng tôi.</p>
            </div>
        </div>
        <div class="carousel-item">
            <img src="https://encrypted-tbn2.gstatic.com/licensed-image?q=tbn:ANd9GcRFfU9vqxBbsq_f82Avfr4erQXikK_PeM1S36Lo1ipBo61SrgbU5tPPANMuCMch9WeQtd5IqNTMFgWxIi6dYVI_S7idcPjuyOHFrYCKBg" class="d-block w-100" alt="Image 2">
            <div class="banner-content">
                <h2>Sản phẩm mới nhất!</h2>
                <p>Cập nhật những sản phẩm hot nhất của chúng tôi.</p>
            </div>
        </div>
        <div class="carousel-item">
            <img src="https://encrypted-tbn1.gstatic.com/licensed-image?q=tbn:ANd9GcRFkfF2exUGoU772WhhD7Y6xnJRrSXt0v32pgtAH-JT_zyZBfPfql-Ms1eIqdArr266_d2aHudDjQtAjWMFibTkEvo1FNgChTd7Z9xrIw" class="d-block w-100" alt="Image 2">
            <div class="banner-content">
                <h2>Sản phẩm mới nhất!</h2>
                <p>Cập nhật những sản phẩm hot nhất của chúng tôi.</p>
            </div>
        </div>
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#bannerCarousel" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#bannerCarousel" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
    </button>
</section>

<section class="py-4">
    <div class="container">
        <!-- Form tìm kiếm -->
        <form method="get" asp-action="Index">
            <div class="row mb-4">
                <div class="col-md-3">
                    <label for="query" class="form-label">Nhập từ khóa</label>
                    <input type="text" id="query" name="query" class="form-control" placeholder="Tìm kiếm..." />
                </div>
                <div class="col-md-3">
                    <label for="categoryId" class="form-label">Điểm bắt đầu</label>
                    <select id="categoryId" name="categoryId" class="form-select">
                        <option value="">--- Chọn điểm bắt đầu ---</option>
                        @foreach (var category in ViewData["Categories"] as List<WEBSAIGONGLISTEN.Models.Category>)
                        {
                            <option value="@category.Id">@category.Name</option>
                        }
                    </select>
                </div>
                <div class="col-md-3">
                    <label for="departureDate" class="form-label">Ngày Khởi Hành</label>
                    <input type="date" id="departureDate" name="departureDate" class="form-control" value="@ViewData["DepartureDate"]?.ToString()" />
                </div>
                <div class="col-md-3 d-flex align-items-end">
                    <button type="submit" class="btn btn-primary w-100">Tìm Kiếm</button>
                </div>
            </div>
        </form>

        <!-- Hiển thị sản phẩm -->
        <div class="row gx-4 gx-lg-5 row-cols-1 row-cols-md-2 row-cols-lg-3 row-cols-xl-4">
            @foreach (var item in Model)
            {
                var isOutOfStock = item.Quantity == 0;
                <div class="col mb-4">
                    <div class="card h-100 @if(isOutOfStock) {
                <text>out-of-stock</text>
 }">
                        <img src="@item.ImageUrl" class="card-img-top" alt="@item.Name">
                        <div class="card-body">
                            <h5 class="card-title">@Html.DisplayFor(modelItem => item.Name)</h5>
                            <p><strong>Thời gian:</strong> @item.DaysNightsDescription</p>
                            @if (isOutOfStock)
                            {
                                <p class="text-danger">Không còn chỗ trống</p>
                            }
                            else
                            {
                                <a asp-controller="Home" asp-action="Display" asp-route-productId="@item.Id" asp-route-quantity="@numOfQuantity" class="btn btn-outline-primary w-100 mb-2">
                                    <i class="fas fa-map-marked-alt me-1"></i> Chi tiết
                                </a>
                            }
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>
</section>

<!-- Hiển thị phân trang -->
@* <nav aria-label="Page navigation">
    <ul class="pagination justify-content-center">
        @for (int i = 1; i <= (int)ViewData["TotalPages"]; i++)
        {
            <li class="page-item @(i == (int)ViewData["CurrentPage"] ? "active" : "")">
                <a class="page-link" href="@Url.Action("Index", new { page = i })">@i</a>
            </li>
        }
    </ul>
</nav> *@